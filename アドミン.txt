<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Salesforce Administrator Mastery - 100 Qs</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&display=swap');
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #f1f5f9; color: #1e293b; overflow-x: hidden; }
        .option-btn:disabled { cursor: not-allowed; }
        .progress-bar { transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }
        .exam-card:hover { transform: translateY(-8px); box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1); }
        .dashboard-card { background: linear-gradient(135deg, #0d1b2a 0%, #1b263b 100%); }
        .animate-fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
        .modal-overlay { background: rgba(15, 23, 42, 0.85); backdrop-filter: blur(5px); }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center p-4 md:p-8">

    <header class="w-full max-w-5xl mb-6 flex justify-between items-center px-2">
        <h1 onclick="location.reload()" class="text-xl md:text-3xl font-black text-slate-800 cursor-pointer flex items-center gap-2">
            <i class="fas fa-user-shield text-cyan-600"></i>
            <span>Administrator <span class="text-cyan-600">Mastery</span></span>
        </h1>
        <div class="bg-white px-4 py-2 rounded-2xl shadow-sm border border-slate-200">
            <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Mistakes</span>
            <span id="header-wrong-count" class="text-lg font-black text-red-500 ml-2">0</span>
        </div>
    </header>

    <main id="app-container" class="w-full max-w-5xl">
        <!-- Dashboard -->
        <div id="selection-screen" class="space-y-6 animate-fade-in">
            <section class="dashboard-card rounded-[2.5rem] p-8 text-white shadow-2xl relative overflow-hidden">
                <div class="relative z-10 flex flex-col md:flex-row justify-between items-center gap-8">
                    <div>
                        <h2 class="text-sm font-black text-cyan-400 uppercase tracking-[0.2em] mb-1">Status Summary</h2>
                        <p class="text-3xl font-black">学習管理ダッシュボード</p>
                    </div>
                    <div class="flex gap-10">
                        <div class="text-center">
                            <span class="block text-[10px] font-bold text-slate-500 uppercase mb-1">Total Ans</span>
                            <span id="dash-total-attempts" class="text-3xl font-black">0</span>
                        </div>
                        <div class="text-center border-l border-slate-800 pl-10">
                            <span class="block text-[10px] font-bold text-slate-500 uppercase mb-1">Accuracy</span>
                            <span id="dash-overall-accuracy" class="text-3xl font-black text-cyan-400">0%</span>
                        </div>
                    </div>
                </div>
            </section>

            <section id="review-section" class="hidden p-6 bg-red-50 rounded-3xl border-2 border-red-100 flex items-center justify-between gap-4">
                <div class="flex items-center gap-4 text-slate-800">
                    <i class="fas fa-redo text-2xl text-red-600"></i>
                    <div>
                        <h3 class="font-black">ニガテ克服チャンス</h3>
                        <p class="text-xs text-slate-500">ミスした <span id="failed-count-display">0</span> 問がストックされています。</p>
                    </div>
                </div>
                <button onclick="quizApp.startReview()" class="bg-red-600 text-white font-black py-3 px-8 rounded-xl">復習開始</button>
            </section>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <button onclick="quizApp.start(false)" class="bg-white rounded-[2rem] p-8 shadow-lg border-b-8 border-slate-900 text-left hover:-translate-y-1 transition">
                    <i class="fas fa-list-ol text-cyan-600 text-2xl mb-4"></i>
                    <h3 class="text-xl font-black mb-2 tracking-tighter">全100問マラソン</h3>
                    <p class="text-xs text-slate-400 font-medium tracking-tight">1番から順に網羅的に学習します。</p>
                </button>
                <button onclick="quizApp.start(true)" class="bg-white rounded-[2rem] p-8 shadow-lg border-b-8 border-cyan-600 text-left hover:-translate-y-1 transition">
                    <i class="fas fa-bolt text-cyan-600 text-2xl mb-4"></i>
                    <h3 class="text-xl font-black mb-2 tracking-tighter">ランダムチャレンジ</h3>
                    <p class="text-xs text-slate-400 font-medium tracking-tight">シャッフルして本番形式で挑みます。</p>
                </button>
            </div>

            <div class="space-y-4">
                <div class="flex justify-between items-center px-2">
                    <h3 class="text-xs font-black text-slate-400 uppercase tracking-widest">Domain Selection</h3>
                    <div class="flex items-center gap-2">
                        <span class="text-[10px] font-bold text-slate-400 uppercase">Overall Progress</span>
                        <div class="w-24 h-1.5 bg-slate-200 rounded-full overflow-hidden">
                            <div id="overall-progress-bar" class="h-full bg-cyan-500 w-0 transition-all duration-1000"></div>
                        </div>
                        <span id="overall-progress-text" class="text-[10px] font-black text-cyan-600">0%</span>
                    </div>
                </div>
                <div id="category-list-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3"></div>
            </div>
        </div>

        <!-- Quiz UI -->
        <div id="quiz-screen" class="hidden animate-fade-in w-full">
            <div class="flex justify-between items-center mb-6 px-2">
                <div class="flex items-center gap-4">
                    <button onclick="quizApp.showQuitModal()" class="bg-white w-12 h-12 rounded-full border border-slate-200 shadow-sm flex items-center justify-center text-slate-300 hover:text-red-500 transition-colors"><i class="fas fa-times text-xl"></i></button>
                    <div>
                        <span id="quiz-mode-label" class="block text-[10px] font-black text-cyan-500 uppercase tracking-widest mb-1">Standard Marathon</span>
                        <span id="progress-text" class="text-xl font-black leading-none tracking-tighter">QUESTION 1/100</span>
                    </div>
                </div>
                <span id="score-text" class="text-3xl font-black text-cyan-600 italic">0%</span>
            </div>
            <div class="w-full bg-slate-200 h-3 rounded-full mb-10 overflow-hidden shadow-inner border border-slate-300">
                <div id="progress-bar" class="progress-bar bg-cyan-600 h-full w-0"></div>
            </div>

            <div class="bg-white rounded-[3.5rem] shadow-2xl p-6 md:p-12 border border-slate-100 relative">
                <div id="category-badge" class="inline-block px-5 py-2 rounded-2xl bg-cyan-50 text-cyan-600 text-[10px] font-black mb-10 uppercase tracking-widest border border-cyan-100">CATEGORY</div>
                <h3 id="question-text" class="text-xl md:text-2xl font-bold text-slate-800 mb-12 leading-snug"></h3>
                <div id="options-container" class="grid grid-cols-1 gap-4 mb-8"></div>
                <div id="explanation-container" class="hidden mt-10 pt-10 border-t-2 border-slate-50">
                    <div id="result-badge" class="flex items-center p-6 rounded-2xl mb-6 font-black text-lg italic tracking-widest"></div>
                    <div id="explanation-text" class="text-slate-600 text-sm md:text-base leading-relaxed whitespace-pre-wrap bg-slate-50 p-8 rounded-2xl border border-slate-100 font-medium italic"></div>
                    <button onclick="quizApp.nextQuestion()" class="mt-8 w-full bg-slate-900 text-white font-black py-5 rounded-2xl transition shadow-xl active:scale-95 flex items-center justify-center gap-3">
                        <span>次の問題に進む</span> <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Result Dashboard -->
        <div id="result-screen" class="hidden space-y-10 animate-fade-in pb-20">
            <div class="bg-white rounded-[3.5rem] shadow-2xl p-10 md:p-20 text-center">
                <h2 class="text-3xl font-black text-slate-300 uppercase tracking-[0.5em] mb-4">Complete</h2>
                <div id="final-emoji" class="text-8xl my-10 tracking-tighter italic">🏆</div>
                <div id="final-score" class="text-8xl font-black text-cyan-600 mb-4 tracking-tighter italic">0%</div>
                <p id="final-stats" class="text-slate-400 font-black text-xl mb-12 uppercase tracking-widest"></p>
                <div class="text-left border-t pt-16">
                    <h3 class="text-2xl font-black flex items-center gap-3 mb-10 text-slate-800"><i class="fas fa-chart-line text-cyan-500"></i> 強み・弱み分析</h3>
                    <div class="overflow-hidden rounded-[2.5rem] border border-slate-100 shadow-sm">
                        <table class="w-full text-left">
                            <thead class="bg-slate-50">
                                <tr class="text-[10px] font-black text-slate-400 uppercase tracking-widest">
                                    <th class="p-6">カテゴリ</th>
                                    <th class="p-6 text-right">判定 / 正解率</th>
                                </tr>
                            </thead>
                            <tbody id="analysis-table-body" class="divide-y divide-slate-50"></tbody>
                        </table>
                    </div>
                </div>
                <div class="flex flex-col sm:flex-row gap-4 justify-center mt-16">
                    <button id="result-review-btn" onclick="quizApp.startReview()" class="hidden bg-red-600 text-white font-black py-6 px-12 rounded-3xl shadow-xl transition hover:bg-red-700">ミスした問題を復習</button>
                    <button onclick="location.reload()" class="bg-slate-900 text-white font-black py-6 px-12 rounded-3xl shadow-xl transition hover:bg-black">トップに戻る</button>
                </div>
            </div>
        </div>
    </main>

    <!-- Modals -->
    <div id="quit-modal" class="hidden fixed inset-0 z-50 modal-overlay flex items-center justify-center p-4">
        <div class="bg-white rounded-[2.5rem] p-10 max-w-md w-full shadow-2xl animate-fade-in text-center">
            <div class="text-red-500 text-7xl mb-8"><i class="fas fa-question-circle"></i></div>
            <h3 class="text-3xl font-black mb-4">学習を中断しますか？</h3>
            <p class="text-slate-500 mb-12 font-medium">これまでの進捗は保存されますが、セッションは終了します。</p>
            <div class="grid grid-cols-2 gap-4">
                <button onclick="quizApp.hideQuitModal()" class="bg-slate-50 text-slate-500 font-black py-5 rounded-2xl">続ける</button>
                <button onclick="quizApp.quitQuiz()" class="bg-red-600 text-white font-black py-5 rounded-2xl shadow-xl shadow-red-100">中断して戻る</button>
            </div>
        </div>
    </div>

    <script>
        const ADMIN_DATA = [
            // 組織の設定 (1-7)
            { id: 1, cat: "組織の設定 / セキュリティ", q: "Salesforceの会計年度について正しい記述はどれですか？", a: "A. 標準の会計年度は任意の日から開始できる", b: "B. カスタム会計年度を一度有効にすると無効にできない", c: "C. 会計年度を変更するとレポートの履歴データは自動更新されない", d: "D. 標準の会計年度は構造を自由に変更できる", correct: "B", exp: "Bが正解：カスタム会計年度を一度有効にすると、標準の会計年度に戻すことはできません。" },
            { id: 2, cat: "組織の設定 / セキュリティ", q: "ユーザーがSalesforceにログインできない。管理者が最初に確認すべき場所は？", a: "A. ユーザーのプロファイル", b: "B. ログイン履歴", c: "C. セキュリティトークン", d: "D. 役割階層", correct: "B", exp: "Bが正解：ログイン履歴を確認することで、パスワード間違いなのか、IP制限なのか等の原因を特定できます。" },
            { id: 3, cat: "組織の設定 / セキュリティ", q: "多要素認証 (MFA) の展開について管理者が行うべきことは？", a: "A. ユーザーごとに個別に設定するしかない", b: "B. 権限セットを使用してMFAを有効にする", c: "C. 共有ルールを使用する", d: "D. パスワードポリシーで設定する", correct: "B", exp: "Bが正解：権限セット、またはプロファイルで「ユーザーインターフェースログインの多要素認証」権限を割り当てます。" },
            { id: 4, cat: "組織の設定 / セキュリティ", q: "社内のユーザーが勤務時間外にSalesforceにアクセスできないようにしたい。どこで設定しますか？", a: "A. ログインのIP範囲", b: "B. ログイン時間制限（プロファイル）", c: "C. 組織の共有設定", d: "D. ユーザーレコードの勤務時間", correct: "B", exp: "Bが正解：プロファイルレベルでログイン時間を制限できます。時間外のアクセスは拒否されます。" },
            { id: 5, cat: "組織の設定 / セキュリティ", q: "パスワードポリシーの設定において、組織全体のデフォルトを上書きできるのはどこですか？", a: "A. 役割", b: "B. プロファイル", c: "C. ユーザーレコード", d: "D. 権限セット", correct: "B", exp: "Bが正解：プロファイルごとのパスワードポリシーは、組織全体のポリシーよりも優先されます。" },
            { id: 6, cat: "組織の設定 / セキュリティ", q: "信頼済みIP範囲とログインIP範囲（プロファイル）の違いは何ですか？", a: "A. 信頼済みIP範囲はログインを制限する", b: "B. ログインIP範囲に含まれない場合はログインを拒否される", c: "C. 信頼済みIP範囲に含まれない場合はログインを拒否される", d: "D. 両者に違いはない", correct: "B", exp: "Bが正解：プロファイルのログインIP範囲は「厳格な制限」であり、範囲外はログイン不可。信頼済みIP範囲は「認証のスキップ（検証コード不要）」です。" },
            { id: 7, cat: "組織の設定 / セキュリティ", q: "通貨管理において、高度な通貨管理（マルチ通貨）を有効にした場合の影響は？", a: "A. すべての計算が自動で行われる", b: "B. 商談の完了日に基づく期間指定換算レートを使用できる", c: "C. 一度有効にすると戻せない", d: "D. 数式項目がすべて無効になる", correct: "B", exp: "Bが正解：高度な通貨管理により、特定期間のレート（DATING EXCHANGE RATES）を保持できます。" },

            // セキュリティとアクセス (8-20)
            { id: 8, cat: "セキュリティとアクセス", q: "組織の共有設定（OWD）が「非公開」のオブジェクトで、所有者以外がレコードを見るには何が必要ですか？", a: "A. 役割階層", b: "B. 共有ルール", c: "C. 手動共有", d: "D. 上記すべて", correct: "D", exp: "Dが正解：非公開設定の場合、役割階層、共有ルール、手動共有のいずれかによりアクセスを拡張します。" },
            { id: 9, cat: "セキュリティとアクセス", q: "特定の項目を特定のユーザーにだけ見せたくない場合、何を使用しますか？", a: "A. ページレイアウト", b: "B. 項目レベルセキュリティ", c: "C. 共有ルール", d: "D. レコードタイプ", correct: "B", exp: "Bが正解：項目レベルセキュリティ（FLS）は、ページレイアウトに関わらずアクセス自体を制御する最も強力な手段です。" },
            { id: 10, cat: "セキュリティとアクセス", q: "役割階層を使用してアクセス権を付与したくないカスタムオブジェクトがあります。どう設定しますか？", a: "A. 組織の共有設定で「階層を使用したアクセス許可」をオフにする", b: "B. 共有ルールを削除する", c: "C. プロファイルで非表示にする", d: "D. 役割を削除する", correct: "A", exp: "Aが正解：カスタムオブジェクトでは、組織の共有設定（OWD）の設定で、階層によるアクセスをオフにできます。" },
            { id: 11, cat: "セキュリティとアクセス", q: "ユーザーが「商談」の削除権限を持っていません。権限セットで付与できますか？", a: "A. はい", b: "B. いいえ", correct: "A", exp: "Aが正解：権限セットはプロファイルの権限を拡張するために使用されます。" },
            { id: 12, cat: "セキュリティとアクセス", q: "外部ユーザーに特定のレコードへのアクセスを許可したい。最も適切な共有設定は？", a: "A. 共有セット", b: "B. 公開グループ", c: "C. 組織全体のデフォルトを公開にする", d: "D. 管理者権限を付与", correct: "A", exp: "Aが正解：Experience Cloudなどの外部ユーザーには、共有セットや共有グループを使用してアクセスを制御します。" },
            { id: 13, cat: "セキュリティとアクセス", q: "レコードの所有者を変更できるのは誰ですか？（2つ選択）", a: "A. 現在の所有者", b: "B. 役割階層で所有者より上位のユーザー", c: "C. すべてのデータの編集権限を持つ管理者", d: "D. 参照権限を持つすべてのユーザー", correct: "A, C", exp: "A, Cが正解：基本は所有者、上位ユーザー、または管理者です（共有設定により上位ユーザーも可能）。" },
            { id: 14, cat: "セキュリティとアクセス", q: "公開グループには、どのようなメンバーを含めることができますか？", a: "A. 個々のユーザー", b: "B. 他の公開グループ", c: "C. 特定の役割", d: "D. 上記すべて", correct: "D", exp: "Dが正解：公開グループは柔軟に構成でき、ユーザー、役割、他のグループを含められます。" },
            { id: 15, cat: "セキュリティとアクセス", q: "共有ルールの目的は何ですか？", a: "A. アクセス制限を厳しくする", b: "B. 例外的にアクセス権を広げる", c: "C. データの削除を防ぐ", d: "D. ページレイアウトを変更する", correct: "B", exp: "Bが正解：OWDで制限したアクセスを、特定の条件やグループに基づいて広げるのが役割です。" },
            { id: 16, cat: "セキュリティとアクセス", q: "「表示」を許可するが「編集」を禁止したい。どこで設定しますか？", a: "A. 共有ルール", b: "B. プロファイル（または権限セット）", c: "C. OWD", d: "D. ページレイアウト", correct: "B", exp: "Bが正解：オブジェクト単位の「作成・読取・編集・削除」はプロファイルまたは権限セットで管理します。" },
            { id: 17, cat: "セキュリティとアクセス", q: "パスワードを忘れたユーザーに対して管理者が行うべきことは？", a: "A. 新しいパスワードをメールで教える", b: "B. パスワードのリセットボタンを押す", c: "C. プロファイルを変更する", d: "D. ユーザーを一度無効化する", correct: "B", exp: "Bが正解：セキュリティ上、管理者がパスワードを直接設定・通知することは避け、リセットリンクを送ります。" },
            { id: 18, cat: "セキュリティとアクセス", q: "ユーザーを無効化できない状況はどれですか？", a: "A. 役割が割り当てられている場合", b: "B. カスタム階層項目の受信者になっている場合", c: "C. ワークフローのデフォルト承認者になっている場合", d: "D. Chatterを有効にしている場合", correct: "C", exp: "Cが正解：ワークフローのデフォルト承認者や、一部のプロセスで参照されている場合は無効化前に変更が必要です。" },
            { id: 19, cat: "セキュリティとアクセス", q: "レコードタイプの主な目的は何ですか？", a: "A. データのセキュリティを強化する", b: "B. 異なるビジネスプロセス、選択リスト値、ページレイアウトを表示する", c: "C. 項目の編集を禁止する", d: "D. ストレージ容量を節約する", correct: "B", exp: "Bが正解：レコードタイプを使用すると、1つのオブジェクトで異なるUIやプロセスを提供できます。" },
            { id: 20, cat: "セキュリティとアクセス", q: "代理管理者が実行できるアクションはどれですか？", a: "A. プロファイルの作成", b: "B. 特定の役割のユーザー作成・編集", c: "C. 全ユーザーのパスワード変更", d: "D. 組織の共有設定の変更", correct: "B", exp: "Bが正解：代理管理者は、特定の役割やプロファイルの管理、権限セットの割当などをサポートします。" },

            // オブジェクトマネージャと App Builder (21-35)
            { id: 21, cat: "オブジェクトマネージャと App Builder", q: "主従関係について正しい記述はどれですか？", a: "A. 標準オブジェクトは従側になれる", b: "B. 主レコードを削除すると従レコードも削除される", c: "C. 従レコードに所有者項目が存在する", d: "D. 1つのオブジェクトに最大10個作成できる", correct: "B", exp: "Bが正解：主従関係では、主レコードの削除が従レコードの連鎖削除を引き起こします。" },
            { id: 22, cat: "オブジェクトマネージャと App Builder", q: "参照関係（Lookup）と主従関係（Master-Detail）の最大の違いは？", a: "A. 参照関係は必須項目である必要がある", b: "B. 主従関係はセキュリティが主レコードに従う", c: "C. 参照関係は積み上げ集計が使える", d: "D. 主従関係は標準オブジェクトを従側にできる", correct: "B", exp: "Bが正解：主従関係は従レコードのアクセス権が主レコードにより決定されます。また積み上げ集計も可能です。" },
            { id: 23, cat: "オブジェクトマネージャと App Builder", q: "商談の合計金額を取引先に自動で表示したい。どの項目タイプを使いますか？", a: "A. 数式項目", b: "B. 積み上げ集計項目", c: "C. テキスト項目", d: "D. 外部参照項目", correct: "B", exp: "Bが正解：取引先と商談は標準で主従のような関係にあるため、積み上げ集計（Roll-up Summary）が可能です。" },
            { id: 24, cat: "オブジェクトマネージャと App Builder", q: "数式項目で計算可能なものはどれですか？", a: "A. 同じレコードの他の項目", b: "B. 親レコードの項目", c: "C. 子レコードの件数", d: "D. AとB", correct: "D", exp: "Dが正解：数式は自レコードおよび親レコード（クロスオブジェクト数式）を参照できますが、子レコードの集計は「積み上げ集計」が必要です。" },
            { id: 25, cat: "オブジェクトマネージャと App Builder", q: "バリデーションルール（入力規則）が実行されるタイミングは？", a: "A. レコードが保存される前", b: "B. レコードが保存された後", c: "C. ページが開かれた時", d: "D. ワークフローが実行された後", correct: "A", exp: "Aが正解：保存ボタンが押された直後、DBにコミットされる前にチェックされます。" },
            { id: 26, cat: "オブジェクトマネージャと App Builder", q: "Lightningアプリケーションビルダーで作成できるページタイプは？（3つ選択）", a: "A. アプリケーションページ", b: "B. ホームページ", c: "C. レコードページ", d: "D. レポートページ", correct: "A, B, C", exp: "A, B, Cが正解：アプリケーション、ホーム、レコードの3種類をカスタマイズできます。" },
            { id: 27, cat: "オブジェクトマネージャと App Builder", q: "商談の「フェーズ」ごとに異なる項目を表示したい。何を使いますか？", a: "A. ページレイアウト", b: "B. 動的フォーム（Dynamic Forms）", c: "C. 共有ルール", d: "D. 数式項目", correct: "B", exp: "Bが正解：動的フォームを使用すると、項目ごとの可視性をフェーズなどの条件で制御できます。" },
            { id: 28, cat: "オブジェクトマネージャと App Builder", q: "外部ID（External ID）として指定できるデータ型は？", a: "A. テキスト", b: "B. 数値", c: "C. メール", d: "D. 上記すべて", correct: "D", exp: "Dが正解：テキスト、数値、メールを外部ID（外部システムとの紐付け用）として設定できます。" },
            { id: 29, cat: "オブジェクトマネージャと App Builder", q: "オブジェクトの「ヘルプテキスト」はどこに表示されますか？", a: "A. ページの上部", b: "B. 項目の横にある i アイコン", c: "C. 保存時のエラーメッセージ", d: "D. レポートの見出し", correct: "B", exp: "Bが正解：ユーザーが入力に迷わないよう、項目名の横にアイコンとして表示されます。" },
            { id: 30, cat: "オブジェクトマネージャと App Builder", q: "カスタム項目のデータ型を変更する際、注意すべきことは？", a: "A. データが失われる可能性がある", b: "B. 変更はいつでも自由に行える", c: "C. 変更後も以前のデータはそのまま残る", d: "D. 管理者権限があればデータ損失は起きない", correct: "A", exp: "Aが正解：例えば、テキストから数値への変更など、型に互換性がない場合は既存データが削除されます。" },
            { id: 31, cat: "オブジェクトマネージャと App Builder", q: "商談の「完了予定日」が過去の日付で保存されないようにしたい。何を使いますか？", a: "A. デフォルト値", b: "B. 入力規則", c: "C. 自動起動フロー", d: "D. ページレイアウト", correct: "B", exp: "Bが正解：CloseDate < TODAY() という入力規則を作成します。" },
            { id: 32, cat: "オブジェクトマネージャと App Builder", q: "ジャンクションオブジェクト（多対多関係）を作成するために必要なものは？", a: "A. 2つの参照関係", b: "B. 2つの主従関係", c: "C. 1つの主従関係と1つの参照関係", d: "D. 特別なプラグイン", correct: "B", exp: "Bが正解：1つのオブジェクトに2つの主従関係を作成することで多対多を実現します。" },
            { id: 33, cat: "オブジェクトマネージャと App Builder", q: "クイックアクションでできることは？（2つ選択）", a: "A. レコードの作成", b: "B. 項目の更新", c: "C. レポートの削除", d: "D. 共有設定の変更", correct: "A, B", exp: "A, Bが正解：関連レコードの作成や、自レコードの項目更新を簡単に行えます。" },
            { id: 34, cat: "オブジェクトマネージャと App Builder", q: "パス（Path）コンポーネントは何のために使用されますか？", a: "A. データのインポート", b: "B. ビジネスプロセスの視覚化とガイダンス", c: "C. ユーザーの削除", d: "D. グラフの表示", correct: "B", exp: "Bが正解：商談やリードの進捗状況を視覚的に示し、各ステップのヒントを表示します。" },
            { id: 35, cat: "オブジェクトマネージャと App Builder", q: "カスタムタブの種類は？（3つ選択）", a: "A. カスタムオブジェクトタブ", b: "B. Webタブ", c: "C. Visualforceタブ", d: "D. レポートタブ", correct: "A, B, C", exp: "A, B, Cが正解：オブジェクト、Webページ、Visualforce（またはLightningページ）をタブ化できます。" },

            // 営業およびマーケティングアプリケーション (36-50)
            { id: 36, cat: "営業およびマーケティングアプリケーション", q: "リードの変換（コンバート）時に作成されるレコードは？", a: "A. 取引先、取引先責任者、商談", b: "B. 取引先、ケース、商談", c: "C. リード、取引先、商談", d: "D. 取引先責任者のみ", correct: "A", exp: "Aが正解：リードは変換されると、取引先、取引先責任者、および任意で商談に分かれます。" },
            { id: 37, cat: "営業およびマーケティングアプリケーション", q: "Web-to-リードで1日に処理できる最大数は？", a: "A. 100", b: "B. 500", c: "C. 5,000", d: "D. 無制限", correct: "C", exp: "Cが正解：標準で24時間あたり5,000件まで取り込めます。" },
            { id: 38, cat: "営業およびマーケティングアプリケーション", q: "キャンペーンの影響（Campaign Influence）とは何ですか？", a: "A. キャンペーンが商談成約に与えた影響を追跡する", b: "B. メールの開封率を測定する", c: "C. リードの質をスコアリングする", d: "D. 商談のフェーズを進める", correct: "A", exp: "Aが正解：商談にどのキャンペーンが関与したかを関連付け、効果を測定します。" },
            { id: 39, cat: "営業およびマーケティングアプリケーション", q: "商談チーム（Opportunity Team）を使用するメリットは？", a: "A. 商談レコードの削除を防ぐ", b: "B. 複数のユーザーが協力して1つの商談を進め、アクセス権を付与する", c: "C. コミッションを自動計算する", d: "D. 売上予測を停止する", correct: "B", exp: "Bが正解：商談ごとに協力メンバーを定義し、必要な権限を動的に与えます。" },
            { id: 40, cat: "営業およびマーケティングアプリケーション", q: "売上予測（Forecasting）で集計される金額は？", a: "A. 総売上のみ", b: "B. 商談ステージに基づく金額（パイプライン、最善、達成予測など）", c: "C. キャンペーンの予算", d: "D. ケースの解決数", correct: "B", exp: "Bが正解：商談のフェーズに対応する「売上予測分類」が集計されます。" },
            { id: 41, cat: "営業およびマーケティングアプリケーション", q: "価格表（Price Book）の用途は何ですか？", a: "A. ユーザーの給与管理", b: "B. 異なる顧客（法人、個人、地域など）に異なる価格で商品を販売する", c: "C. 在庫管理", d: "D. 税金の計算", correct: "B", exp: "Bが正解：標準価格表の他に、用途に応じたカスタム価格表を作成できます。" },
            { id: 42, cat: "営業およびマーケティングアプリケーション", q: "見積（Quotes）から商談への同期（Sync）について正しいのは？", a: "A. 複数の見積を同時に同期できる", b: "B. 同期できるのは一度に1つの見積のみ", c: "C. 同期は手動でしか行えない", d: "D. 同期すると商品がすべて削除される", correct: "B", exp: "Bが正解：1つの商談に対して複数の見積を作成できますが、同期できるのは1つだけです。" },
            { id: 43, cat: "営業およびマーケティングアプリケーション", q: "「取引先責任者の役割」はどこで使用されますか？", a: "A. 商談やケース", b: "B. リードのみ", c: "C. プロファイル設定", d: "D. 通貨管理", correct: "A", exp: "Aが正解：商談の意思決定者や、ケースの連絡先としての役割を定義します。" },
            { id: 44, cat: "営業およびマーケティングアプリケーション", q: "自動割り当てルール（Assignment Rules）が機能するのはどのオブジェクトですか？", a: "A. リード、ケース", b: "B. 商談、取引先", c: "C. カスタムオブジェクトのみ", d: "D. すべてのオブジェクト", correct: "A", exp: "Aが正解：リードとケースには標準で自動割り当て機能が備わっています。" },
            { id: 45, cat: "営業およびマーケティングアプリケーション", q: "キャンペーンメンバーとして登録できるのは誰ですか？", a: "A. リード、取引先責任者", b: "B. 取引先、商談", c: "C. ユーザーのみ", d: "D. 外部の取引先責任者のみ", correct: "A", exp: "Aが正解：キャンペーンの対象はリードまたは既存の取引先責任者です。" },
            { id: 46, cat: "営業およびマーケティングアプリケーション", q: "商談の「完了 - 成約」時に自動的にメールを送りたい。何を使いますか？", a: "A. 割り当てルール", b: "B. フロー", c: "C. レコードタイプ", d: "D. 共有ルール", correct: "B", exp: "Bが正解：レコードトリガーフローを使用して、条件合致時にアクションを実行します。" },
            { id: 47, cat: "営業およびマーケティングアプリケーション", q: "受注済みの商談で商品項目を編集したいができない。なぜですか？", a: "A. 受注後はロックされる", b: "B. 見積と同期している", c: "C. 権限がない", d: "D. AまたはBの可能性がある", correct: "D", exp: "Dが正解：同期中の見積がある場合、商談の商品は見積側に縛られます。" },
            { id: 48, cat: "営業およびマーケティングアプリケーション", q: "リードの重複を防ぐために管理者が設定すべき機能は？", a: "A. 重複ルールと一致ルール", b: "B. バリデーションルール", c: "C. フロー", d: "D. プロファイル", correct: "A", exp: "Aが正解：一致ルールで「何をもって重複とするか」を定義し、重複ルールで「検知時にどうするか」を決めます。" },
            { id: 49, cat: "営業およびマーケティングアプリケーション", q: "コンテンツ配信（Content Delivery）の機能は？", a: "A. ファイルをURLとして外部に共有し、閲覧状況を追跡する", b: "B. 社内メールを送る", c: "C. 動画を編集する", d: "D. レポートをエクスポートする", correct: "A", exp: "Aが正解：外部ユーザーがファイルをダウンロードしたか、いつ見たかを確認できます。" },
            { id: 50, cat: "営業およびマーケティングアプリケーション", q: "商談のフェーズを戻した際、以前の履歴を確認したい。何を見ますか？", a: "A. ステージ履歴（商談履歴）関連リスト", b: "B. Chatter", c: "C. ごみ箱", d: "D. セットアップログ", correct: "A", exp: "Aが正解：商談のフェーズ変更、金額、完了予定日の変更履歴は標準で追跡されます。" },

            // サービスおよびサポートアプリケーション (51-60)
            { id: 51, cat: "サービスおよびサポートアプリケーション", q: "ケースの自動割り当てルールについて正しいのは？", a: "A. 複数のルールが同時に実行される", b: "B. ルール内の最初の一致したエントリーのみが実行される", c: "C. ユーザーが手動で選ぶ", d: "D. 常に管理者に割り当てられる", correct: "B", exp: "Bが正解：割り当てルールは上から順番に判定され、最初に条件に合ったものが適用されます。" },
            { id: 52, cat: "サービスおよびサポートアプリケーション", q: "エスカレーションルール（Escalation Rules）の用途は？", a: "A. ケースを削除する", b: "B. 特定時間内に解決しないケースを上位者や別のキューに回す", c: "C. メールの自動返信", d: "D. アンケートの送付", correct: "B", exp: "Bが正解：SLA（サービス品質保証）を守るために、未対応のケースを自動で転送します。" },
            { id: 53, cat: "サービスおよびサポートアプリケーション", q: "ケースの「キュー（Queue）」とは何ですか？", a: "A. 個人のフォルダ", b: "B. 複数のユーザーが共有して待機しているレコードの受け皿", c: "C. レポートの保存先", d: "D. ゴミ箱", correct: "B", exp: "Bが正解：担当が決まる前のケースを一時的に保持し、空いているメンバーがそこから取得します。" },
            { id: 54, cat: "サービスおよびサポートアプリケーション", q: "Salesforce ナレッジ（Knowledge）を利用するために必要なライセンスは？", a: "A. Salesforce 標準ライセンス", b: "B. Knowledge User 機能ライセンス", c: "C. Marketing Cloud ライセンス", d: "D. ライセンスは不要", correct: "B", exp: "Bが正解：ナレッジの作成・編集には「ナレッジユーザー」ライセンスのチェックが必要です。" },
            { id: 55, cat: "サービスおよびサポートアプリケーション", q: "ケースに対してメールで回答を送った際、自動でケースをクローズしたい。何を使いますか？", a: "A. ワークフロー", b: "B. フロー", c: "C. エスカレーションルール", d: "D. 割り当てルール", correct: "B", exp: "Bが正解：メールメッセージレコードの作成をトリガーとしたフローで実装可能です。" },
            { id: 56, cat: "サービスおよびサポートアプリケーション", q: "ケースの「マイルストーン」とは何ですか？", a: "A. 完了後のアンケート", b: "B. サポートプロセスの各ステップ（最初の回答までの時間など）の期限", c: "C. レポートのグラフ名", d: "D. ユーザーのランク", correct: "B", exp: "Bが正解：エンタイトルメント管理の一部として、特定の時間枠内でのアクションを管理します。" },
            { id: 57, cat: "サービスおよびサポートアプリケーション", q: "Web-to-ケースで取り込まれたケースの所有者はどうなりますか？", a: "A. 常にシステム管理者", b: "B. デフォルトのケース所有者（または割り当てルールによる）", c: "C. 顧客本人", d: "D. 空欄になる", correct: "B", exp: "Bが正解：割り当てルールがあればそれに従い、なければサポート設定のデフォルト所有者になります。" },
            { id: 58, cat: "サービスおよびサポートアプリケーション", q: "顧客が自分でケースの状況を確認できる場所はどこですか？", a: "A. Experience Cloud サイト（コミュニティ）", b: "B. Salesforce セットアップ", c: "C. レポート", d: "D. AppExchange", correct: "A", exp: "Aが正解：Experience Cloudを使用すると、セルフサービスポータルを提供できます。" },
            { id: 59, cat: "サービスおよびサポートアプリケーション", q: "解決策（Solutions）とナレッジ（Knowledge）の違いは？", a: "A. 解決策は旧機能で、ナレッジはより高度な記事管理が可能", b: "B. ナレッジは無料だが解決策は有料", c: "C. 解決策の方が多機能", d: "D. 違いはない", correct: "A", exp: "Aが正解：現在はナレッジ（Lightning Knowledge）の使用が推奨されています。" },
            { id: 60, cat: "サービスおよびサポートアプリケーション", q: "ケースチームを使用する理由は？", a: "A. ケースを削除するため", b: "B. 1つのケースに複数の担当者（技術担当、営業担当など）を関与させるため", c: "C. メールを一括送信するため", d: "D. 商談をクローズするため", correct: "B", exp: "Bが正解：商談チームと同様、複数の役割でケースをサポートする際に使用します。" },

            // データと分析の管理 (61-80)
            { id: 61, cat: "データと分析の管理", q: "インポートウィザードでインポートできる最大レコード数は？", a: "A. 5,000", b: "B. 50,000", c: "C. 500,000", d: "D. 5,000,000", correct: "B", exp: "Bが正解：インポートウィザードは5万件まで、それ以上はデータローダを使用します。" },
            { id: 62, cat: "データと分析の管理", q: "データローダを使用してレコードを「ハード削除」できますか？", a: "A. はい", b: "B. いいえ", correct: "A", exp: "Aが正解：設定で有効にすれば、ごみ箱を経由せずに直接削除（Hard Delete）が可能です。" },
            { id: 63, cat: "データと分析の管理", q: "カスタムレポートタイプが必要な状況はどれですか？", a: "A. 標準のオブジェクト関係（取引先と商談など）を出す時", b: "B. 3つ以上の関連オブジェクトを組み合わせる、または特定の外部結合が必要な時", c: "C. グラフを表示する時", d: "D. ユーザーを削除する時", correct: "B", exp: "Bが正解：標準レポートタイプではカバーできない複雑な関連や項目の表示を定義できます。" },
            { id: 64, cat: "データと分析の管理", q: "レポートの「バケット項目」は何のために使いますか？", a: "A. データの削除", b: "B. 複数の値をグループ化（例：都道府県を地域ごとにまとめる）して表示する", c: "C. 数式を計算する", d: "D. 画像を表示する", correct: "B", exp: "Bが正解：元のデータを変えずに、レポート上だけでカテゴリ分けを定義できます。" },
            { id: 65, cat: "データと分析の管理", q: "ダッシュボードの「実行ユーザー」を「ログインユーザー」にした場合の効果は？", a: "A. 全員が同じデータを見る", b: "B. 各ユーザーにアクセス権のあるデータのみが表示される（ダイナミックダッシュボード）", c: "C. ダッシュボードが編集できなくなる", d: "D. 毎日メールが届く", correct: "B", exp: "Bが正解：見る人によって内容が変わるダッシュボードになります。" },
            { id: 66, cat: "データと分析の管理", q: "週に一度、すべてのデータをバックアップしたい。どの機能を使いますか？", a: "A. データエクスポートサービス", b: "B. データローダ", c: "C. レポートのスケジュール", d: "D. インポートウィザード", correct: "A", exp: "Aが正解：データエクスポート（Data Export Service）により、定期的なCSVバックアップを自動生成できます。" },
            { id: 67, cat: "データと分析の管理", q: "レポートで「クロスフィルタ」を使うと何ができますか？", a: "A. 2つの無関係なオブジェクトを比較する", b: "B. 関連レコードの有無（商談のない取引先など）で親レコードを絞り込む", c: "C. 通貨を換算する", d: "D. グラフの形を変える", correct: "B", exp: "Bが正解：子レコードの存在有無に基づくフィルタリングが可能です。" },
            { id: 68, cat: "データと分析の管理", q: "数式項目とレポートの「サマリー数式」の違いは？", a: "A. サマリー数式はレポートの集計行でのみ計算される", b: "B. 数式項目はデータベースに保存される", c: "C. サマリー数式は他のレポートから参照できる", d: "D. AとB", correct: "D", exp: "Dが正解：レポート数式は動的で、レポートの集計値に対してのみ機能します。" },
            { id: 69, cat: "データと分析の管理", q: "レポートフォルダの共有単位は？", a: "A. ユーザー、役割、公開グループ", b: "B. レコード所有者のみ", c: "C. 組織全体のみ", d: "D. プロファイルのみ", correct: "A", exp: "Aが正解：フォルダ単位で閲覧・編集・管理権限を割り当てます。" },
            { id: 70, cat: "データと分析の管理", q: "「すべてのデータの参照」権限を持つユーザーができることは？", a: "A. 共有設定に関わらず、組織内のすべてのレコードを見ることができる", b: "B. 全ユーザーのパスワードを変える", c: "C. 組織の設定を削除する", d: "D. ライセンスを増やす", correct: "A", exp: "Aが正解：View All Dataは、セキュリティモデルをバイパスして全データを閲覧できる強力な権限です。" },
            { id: 71, cat: "データと分析の管理", q: "データインポートウィザードで重複をチェックする基準にできるのは？", a: "A. 名前、メール、外部ID", b: "B. 住所", c: "C. 電話番号", d: "D. 作成日", correct: "A", exp: "Aが正解：リードや取引先責任者の一致を確認する基準を指定できます。" },
            { id: 72, cat: "データと分析の管理", q: "ダッシュボードコンポーネントとして使用できるのはどれですか？", a: "A. グラフ、ゲージ、総計値、テーブル", b: "B. ワークフロー", c: "C. ページレイアウト", d: "D. 数式のみ", correct: "A", exp: "Aが正解：視覚的な要素を組み合わせてデータを可視化します。" },
            { id: 73, cat: "データと分析の管理", q: "ごみ箱に保管されたレコードは何日間保存されますか？", a: "A. 7日", b: "B. 15日", c: "C. 30日", d: "D. 90日", correct: "B", exp: "Bが正解：最大15日間、またはストレージ容量の上限に達するまで保管されます。" },
            { id: 74, cat: "データと分析の管理", q: "商談のフェーズ滞在時間をレポートしたい。何を使いますか？", a: "A. 商談履歴レポート", b: "B. 商談トレンドレポート", c: "C. マトリックスレポート", d: "D. AまたはB", correct: "D", exp: "Dが正解：履歴追跡を有効にしたレポート、またはスナップショットを使用して分析します。" },
            { id: 75, cat: "データと分析の管理", q: "外部オブジェクト（Salesforce Connect）の用途は？", a: "A. 外部のSQLサーバーなどのデータを、Salesforce内にコピーせずにリアルタイムで参照する", b: "B. データをCSVで書き出す", c: "C. 画像を保存する", d: "D. ユーザーを管理する", correct: "A", exp: "Aが正解：外部システムのデータをあたかも自組織のレコードのように扱えます。" },
            { id: 76, cat: "データと分析の管理", q: "レポートの「結合レポート（Joined Report）」とは何ですか？", a: "A. 異なるレポートタイプを1つの画面に並べて表示する", b: "B. 1つの表を2つに分ける", c: "C. 外部データを取り込む", d: "D. グラフを2つにする", correct: "A", exp: "Aが正解：共通のキー（取引先など）を持つ異なる種類のデータを横並びにできます。" },
            { id: 77, cat: "データと分析の管理", q: "ダッシュボードをメールで自動送信する際、誰が受信できますか？", a: "A. 組織内のユーザーのみ", b: "B. 任意のメールアドレス（外部も可）", c: "C. 指定された公開グループや役割", d: "D. AとC", correct: "D", exp: "Dが正解：標準機能では組織内のユーザーやグループが対象です。" },
            { id: 78, cat: "データと分析の管理", q: "レポートの結果が2,000件を超える場合、どうなりますか？", a: "A. エラーになる", b: "B. 画面には2,000件まで表示されるが、エクスポートすれば全件取得できる", c: "C. 自動で削除される", d: "D. レポートタイプが変わる", correct: "B", exp: "Bが正解：ブラウザ表示には制限がありますが、データ自体は保持されています。" },
            { id: 79, cat: "データと分析の管理", q: "インポートウィザードで「ワークフローをトリガーする」設定をオフにできますか？", a: "A. はい", b: "B. いいえ", correct: "A", exp: "Aが正解：インポート時に自動化を走らせるかどうかをチェックボックスで制御できます。" },
            { id: 80, cat: "データと分析の管理", q: "積み上げ集計項目で可能な計算はどれですか？", a: "A. 合計、最小、最大、件数", b: "B. 平均", c: "C. 掛け算", d: "D. 文字列結合", correct: "A", exp: "Aが正解：平均は計算できません。合計と件数から数式で出す必要があります。" },

            // ワークフロー/プロセスの自動化 (81-100)
            { id: 81, cat: "ワークフロー/プロセスの自動化", q: "フロー（Flow Builder）でできるが、ワークフローではできないことは？", a: "A. レコードの更新", b: "B. レコードの作成、削除", c: "C. メール送信", d: "D. アウトバウンドメッセージ送信", correct: "B", exp: "Bが正解：フローはデータの作成や削除、さらには画面（UI）の提供も可能です。" },
            { id: 82, cat: "ワークフロー/プロセスの自動化", q: "承認プロセスで「最初の承認アクション」として設定できるのは？", a: "A. レコードのロック", b: "B. 項目の更新", c: "C. メールアラート送信", d: "D. 上記すべて", correct: "D", exp: "Dが正解：申請が始まった瞬間にロックをかけたり通知を送ったりできます。" },
            { id: 83, cat: "ワークフロー/プロセスの自動化", q: "レコードが特定の条件を満たした時、3日後にメールを送りたい。何を使いますか？", a: "A. 即時アクション", b: "B. スケジュール済みパス（フロー）または時間ベースのアクション", c: "C. 割り当てルール", d: "D. エスカレーションルール", correct: "B", exp: "Bが正解：時間を指定してアクションを予約できます。" },
            { id: 84, cat: "ワークフロー/プロセスの自動化", q: "フローで「ループ（Loop）」を使用する目的は？", a: "A. レコードのコレクション（複数レコード）を1つずつ処理する", b: "B. 画面を何度も出す", c: "C. エラーを繰り返す", d: "D. ログインを繰り返す", correct: "A", exp: "Aが正解：取得したリストに対して順番に処理を行う際に不可欠です。" },
            { id: 85, cat: "ワークフロー/プロセスの自動化", q: "プロセスビルダー（Process Builder）とフローの違いについて正しいのは？", a: "A. プロセスビルダーは今後廃止予定で、フローへの移行が推奨されている", b: "B. プロセスビルダーの方が多機能", c: "C. フローは自動化できない", d: "D. 違いはない", correct: "A", exp: "Aが正解：Salesforceはすべての自動化機能をFlowに統合する方針です。" },
            { id: 86, cat: "ワークフロー/プロセスの自動化", q: "承認プロセスの「代理承認者」はどこで設定しますか？", a: "A. ユーザーレコード", b: "B. プロファイル", c: "C. 役割", d: "D. 共有ルール", correct: "A", exp: "Aが正解：各ユーザーの個人設定（ユーザーレコード）で代理人を指定できます。" },
            { id: 87, cat: "ワークフロー/プロセスの自動化", q: "レコードトリガーフローで「高速フィールド更新（Before Save）」を選ぶメリットは？", a: "A. 保存速度が10倍速い", b: "B. 保存される前に値を書き換えるため、処理効率が非常に良い", c: "C. 関連レコードを更新できる", d: "D. メールを送れる", correct: "B", exp: "Bが正解：自レコードの項目更新のみを行う場合はBefore Saveが推奨されます。" },
            { id: 88, cat: "ワークフロー/プロセスの自動化", q: "承認プロセスにおいて、最終承認後に実行できないアクションはどれですか？", a: "A. レコードの削除", b: "B. 項目の更新", c: "C. タスクの作成", d: "D. メールアラート", correct: "A", exp: "Aが正解：標準の承認アクションに「レコードの削除」はありません。フローを呼び出す必要があります。" },
            { id: 89, cat: "ワークフロー/プロセスの自動化", q: "「画面フロー」を実行できる場所は？", a: "A. レコードページ上のボタン", b: "B. Lightningページのコンポーネント", c: "C. Experience Cloud サイト", d: "D. 上記すべて", correct: "D", exp: "Dが正解：ウィザード形式のUIを様々な場所に配置できます。" },
            { id: 90, cat: "ワークフロー/プロセスの自動化", q: "フローのエラーが発生した際、管理者はどうやって通知を受け取りますか？", a: "A. メールが届く（フォールトメール）", b: "B. 画面が赤くなる", c: "C. 通知はこない", d: "D. 電話がかかってくる", correct: "A", exp: "Aが正解：エラー内容と発生箇所が記載されたデバッグメールが送信されます。" },
            { id: 91, cat: "ワークフロー/プロセスの自動化", q: "複数の承認ステップがある場合、1つ目のステップが却下されたらどうなりますか？", a: "A. プロセス全体が終了（却下アクション実行）される", b: "B. 次のステップに進む", c: "C. 削除される", d: "D. 管理者に転送される", correct: "A", exp: "Aが正解：通常、却下された時点でその申請は不成立となります。" },
            { id: 92, cat: "ワークフロー/プロセスの自動化", q: "フローで「サブフロー（Subflow）」を使う利点は？", a: "A. 共通の処理を部品化して、複数のフローから呼び出せる", b: "B. 処理速度を落とす", c: "C. ライセンスを節約する", d: "D. 文字を大きくする", correct: "A", exp: "Aが正解：再利用性を高め、メンテナンスを容易にします。" },
            { id: 93, cat: "ワークフロー/プロセスの自動化", q: "自動化が無限ループになるのを防ぐためにSalesforceが設定している制限は？", a: "A. 1回のトランザクションあたりの要素実行数制限（ガバナ制限）", b: "B. ユーザーの削除", c: "C. インターネットの切断", d: "D. サーバーの再起動", correct: "A", exp: "Aが正解：ガバナ制限により、リソースの占有や無限ループを防いでいます。" },
            { id: 94, cat: "ワークフロー/プロセスの自動化", q: "フローでレコードを取得する際、見つからなかった場合の結果はどうなりますか？", a: "A. エラーで止まる", b: "B. 変数が空（null）になる", c: "C. 適当なレコードが入る", d: "D. 自動で作成される", correct: "B", exp: "Bが正解：取得結果が0件の場合、変数は空になります。その後の判定が必要です。" },
            { id: 95, cat: "ワークフロー/プロセスの自動化", q: "組織の「プロセス自動化設定」で設定できるのは？", a: "A. デフォルトのワークフローユーザー", b: "B. フローの実行モード", c: "C. 承認プロセスの通知方法", d: "D. 上記すべて", correct: "D", exp: "Dが正解：自動化全般の共通設定を管理します。" },
            { id: 96, cat: "ワークフロー/プロセスの自動化", q: "商談のフェーズが「交渉」になったら、自動的にタスクを作成したい。何が最も簡単ですか？", a: "A. フロー", b: "B. 承認プロセス", c: "C. 共有ルール", d: "D. ページレイアウト", correct: "A", exp: "Aが正解：レコードトリガーフローで「レコードが更新されたとき」をトリガーにします。" },
            { id: 97, cat: "ワークフロー/プロセスの自動化", q: "「並列承認」とは何ですか？", a: "A. 複数の人が同時に承認しないと次に進めない、または誰か一人が承認すれば良い設定", b: "B. 2つのプロセスを同時に動かす", c: "C. 承認と却下を同時に行う", d: "D. 意味はない", correct: "A", exp: "Aが正解：複数の承認者をステップに設定し、条件（全員or誰か一人）を決められます。" },
            { id: 98, cat: "ワークフロー/プロセスの自動化", q: "フローの「デバッグ（Debug）」機能でできることは？", a: "A. 本番データを書き換えずに実行をシミュレーションする（ロールバック）", b: "B. ユーザーの削除", c: "C. パスワードの確認", d: "D. レポートの作成", correct: "A", exp: "Aが正解：入力値を指定して、フローの挙動をステップごとに確認できます。" },
            { id: 99, cat: "ワークフロー/プロセスの自動化", q: "アウトバウンドメッセージを送信できる自動化ツールは？", a: "A. ワークフロー、フロー", b: "B. レポート", c: "C. 割り当てルール", d: "D. エスカレーションルール", correct: "A", exp: "Aが正解：外部システムへのSOAPメッセージ送信はワークフローまたはフローから可能です。" },
            { id: 100, cat: "ワークフロー/プロセスの自動化", q: "フローの「一時停止（Pause）」アクションが使えるのは？", a: "A. 画面フロー", b: "B. 自動起動フロー（スケジュール済みなど）", c: "C. すべてのフロー", d: "D. 承認プロセス", correct: "B", exp: "Bが正解：特定の条件や時間まで待機させる非同期処理が可能です。" }
        ];

        const quizApp = {
            currentPool: [], currentIndex: 0, score: 0, failedList: [],
            sessionStats: { total: 0, correct: 0 }, catStats: {}, isReviewMode: false,
            init() { 
                this.renderCategoryList(); 
                this.updateUI(); 
            },
            renderCategoryList() {
                const cats = {}; 
                ADMIN_DATA.forEach(q => cats[q.cat] = (cats[q.cat] || 0) + 1);
                const container = document.getElementById('category-list-container'); 
                container.innerHTML = '';
                Object.keys(cats).sort().forEach(cat => {
                    const div = document.createElement('div');
                    div.className = "bg-white border-2 border-slate-100 p-5 rounded-3xl flex justify-between items-center cursor-pointer transition hover:border-cyan-400 group shadow-sm active:scale-95";
                    div.innerHTML = `
                        <div class='flex flex-col'>
                            <span class='text-[10px] font-black text-slate-400 uppercase'>${cats[cat]} Questions</span>
                            <span class='text-sm font-bold text-slate-700'>${cat}</span>
                        </div>
                        <div class='w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center group-hover:bg-cyan-600 group-hover:text-white transition-all shadow-sm'>
                            <i class='fas fa-play text-[10px]'></i>
                        </div>`;
                    div.onclick = () => this.startByCategory(cat);
                    container.appendChild(div);
                });
            },
            start(random) { 
                this.isReviewMode = false; 
                this.currentPool = random ? [...ADMIN_DATA].sort(()=>Math.random()-0.5) : [...ADMIN_DATA]; 
                this.launch(random ? "Random Challenge" : "Standard Marathon"); 
            },
            startByCategory(cat) { 
                this.isReviewMode = false; 
                this.currentPool = ADMIN_DATA.filter(q => q.cat === cat); 
                this.launch(`Drill: ${cat}`); 
            },
            startReview() { 
                if(!this.failedList.length) return; 
                this.isReviewMode = true; 
                this.currentPool = [...this.failedList].sort(()=>Math.random()-0.5); 
                this.launch("Error Recovery"); 
            },
            launch(mode) { 
                this.currentIndex = 0; 
                this.score = 0; 
                document.getElementById('quiz-mode-label').innerText = mode; 
                this.showScreen('quiz-screen'); 
                this.loadQuestion(); 
            },
            showQuitModal() { document.getElementById('quit-modal').classList.remove('hidden'); },
            hideQuitModal() { document.getElementById('quit-modal').classList.add('hidden'); },
            quitQuiz() { 
                this.hideQuitModal(); 
                this.showScreen('selection-screen'); 
                this.updateUI(); 
            },
            loadQuestion() {
                const q = this.currentPool[this.currentIndex]; 
                this.answered = false;
                const progressPercent = ((this.currentIndex + 1) / this.currentPool.length) * 100;
                document.getElementById('progress-bar').style.width = `${progressPercent}%`;
                document.getElementById('progress-text').innerText = `QUESTION ${this.currentIndex+1}/${this.currentPool.length}`;
                document.getElementById('score-text').innerText = `${Math.round((this.score/(this.currentIndex||1))*100)}%`;
                document.getElementById('category-badge').innerText = q.cat;
                document.getElementById('question-text').innerText = q.q;
                
                const container = document.getElementById('options-container'); 
                container.innerHTML = '';
                ['A','B','C','D'].forEach(key => {
                    const optionText = q[key.toLowerCase()];
                    if(optionText) {
                        const btn = document.createElement('button');
                        btn.className = "option-btn w-full text-left p-6 rounded-2xl border-2 border-slate-100 hover:border-cyan-400 hover:bg-cyan-50 transition flex items-start group bg-white shadow-sm";
                        btn.innerHTML = `
                            <span class='inline-block w-10 h-10 rounded-xl bg-slate-100 text-slate-400 font-black text-center leading-10 mr-6 group-hover:bg-cyan-600 group-hover:text-white transition flex-shrink-0'>${key}</span>
                            <span class='text-slate-700 font-bold text-lg pt-1 leading-tight'>${optionText}</span>`;
                        btn.onclick = () => this.handleAnswer(key, btn);
                        container.appendChild(btn);
                    }
                });
                document.getElementById('explanation-container').classList.add('hidden');
                window.scrollTo(0,0);
            },
            handleAnswer(choice, btn) {
                if(this.answered) return; 
                this.answered = true;
                const q = this.currentPool[this.currentIndex]; 
                const correctSet = q.correct.split(',').map(s=>s.trim()); 
                const isCorrect = correctSet.includes(choice);
                
                this.sessionStats.total++; 
                if(!this.catStats[q.cat]) this.catStats[q.cat] = {correct:0, total:0}; 
                this.catStats[q.cat].total++;

                if(isCorrect) { 
                    this.score++; 
                    this.sessionStats.correct++; 
                    this.catStats[q.cat].correct++; 
                    if(this.isReviewMode) this.failedList = this.failedList.filter(item=>item.id!==q.id); 
                } else {
                    if(!this.failedList.find(i=>i.id===q.id)) { this.failedList.push(q); }
                }

                document.querySelectorAll('.option-btn').forEach(b => { 
                    b.disabled = true; 
                    const optKey = b.querySelector('span').innerText;
                    if(correctSet.includes(optKey)) {
                        b.classList.add('border-green-500','bg-green-50');
                        b.classList.remove('border-slate-100');
                    }
                });

                if(!isCorrect) {
                    btn.classList.add('border-red-500','bg-red-50');
                    btn.classList.remove('border-slate-100');
                }

                const badge = document.getElementById('result-badge');
                badge.className = `flex items-center p-6 rounded-2xl mb-6 font-black text-lg italic tracking-widest ${isCorrect?'bg-green-100 text-green-700':'bg-red-100 text-red-700'}`;
                badge.innerHTML = isCorrect ? "<i class='fas fa-check-circle mr-3'></i> CORRECT" : `<i class='fas fa-times-circle mr-3'></i> INCORRECT (正解: ${q.correct})`;
                
                document.getElementById('explanation-text').innerText = q.exp;
                document.getElementById('explanation-container').classList.remove('hidden');
                
                setTimeout(() => { 
                    document.getElementById('explanation-container').scrollIntoView({ behavior: 'smooth', block: 'center' }); 
                }, 100);
                
                this.updateUI();
            },
            nextQuestion() { 
                this.currentIndex++; 
                if(this.currentIndex < this.currentPool.length) {
                    this.loadQuestion(); 
                } else {
                    this.showResult(); 
                }
            },
            showResult() {
                this.showScreen('result-screen'); 
                const percent = Math.round((this.score / this.currentPool.length) * 100);
                document.getElementById('final-score').innerText = `${percent}%`;
                document.getElementById('final-stats').innerText = `${this.currentPool.length}問中 ${this.score}問正解`;
                
                const table = document.getElementById('analysis-table-body'); 
                table.innerHTML = '';
                Object.keys(this.catStats).forEach(cat => {
                    const s = this.catStats[cat]; 
                    const catPerc = Math.round((s.correct/s.total)*100);
                    let judge = catPerc>=80?"Strong":(catPerc>=60?"Average":"Weak"); 
                    let cls = catPerc>=80?"text-green-600 bg-green-50":(catPerc>=60?"text-yellow-600 bg-yellow-50":"text-red-500 bg-red-50");
                    table.innerHTML += `
                        <tr class='group hover:bg-slate-50 transition'>
                            <td class='p-6 font-bold text-slate-700 text-sm'>${cat}</td>
                            <td class='p-6 text-right'>
                                <span class='px-4 py-1.5 rounded-full text-[10px] font-black uppercase ${cls}'>${judge} (${catPerc}%)</span>
                            </td>
                        </tr>`;
                });
                
                document.getElementById('result-review-btn').classList.toggle('hidden', this.failedList.length === 0);
                document.getElementById('final-emoji').innerText = percent>=80?"🏆":(percent>=60?"📚":"⏳");
            },
            updateUI() {
                const wrongCount = this.failedList.length; 
                const totalAttempts = this.sessionStats.total;
                const overallAccuracy = totalAttempts > 0 ? Math.round((this.sessionStats.correct / totalAttempts) * 100) : 0;
                
                document.getElementById('header-wrong-count').innerText = wrongCount;
                document.getElementById('dash-total-attempts').innerText = totalAttempts;
                document.getElementById('dash-overall-accuracy').innerText = `${overallAccuracy}%`;
                document.getElementById('overall-progress-text').innerText = `${overallAccuracy}%`;
                document.getElementById('failed-count-display').innerText = wrongCount;
                document.getElementById('overall-progress-bar').style.width = `${overallAccuracy}%`;
                document.getElementById('review-section').classList.toggle('hidden', wrongCount === 0);
            },
            showScreen(id) { 
                ['selection-screen', 'quiz-screen', 'result-screen'].forEach(s => document.getElementById(s).classList.add('hidden')); 
                document.getElementById(id).classList.remove('hidden'); 
                window.scrollTo(0,0); 
            }
        };

        window.onload = () => quizApp.init();
    </script>
</body>
</html>